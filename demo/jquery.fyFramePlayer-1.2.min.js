!function(b){b.fn.fyFramePlayer=function(c){var d=b.extend({rate:10,delay:0,fixedSize:!0,playTimes:0,stopOnFinish:!1,isMovie:!1,onPlayEnd:function(){}},c),e=this,f=0,g=!1,h=function(){var l,m,b=document.createElement("img"),c=document.createElement("span"),h=-1,i=0,j=!0,k=[];if(b.setAttribute("class","fp-img"),b.style.opacity=0,c.setAttribute("class","ico_player"),e.html(""),e.append(b),e.append(c),l=d.movieName.split(","),1==l.length)void 0!=window[l[0]]?k=k.concat(window[l[0]].frames):console.error(l[0]+" does not exist, please check !");else for(h=0;h<l.length;h++)void 0!=window[l[h]]?k=k.concat(window[l[h]].frames):console.error(l[h]+" does not exist, please check !");d.fixedSize?(b.style.width="100%",b.style.height="100%"):(e.width("100%"),e.height("auto"),b.style.width="100%",b.style.height="auto"),d.isMovie&&(e.find("span").fadeIn(100),d.movieSound?(e.append("<div style=display:none><audio src="+d.movieSound+' preload="auto"></audio></div>'),e.find("audio")[0].load(),e.find("audio")[0].addEventListener("canplaythrough",function(){e.find("span").unbind("click"),e.find("span").bind("click",function(){a.start(),e.find("audio")[0].play()})},!1)):(e.find("span").unbind("click"),e.find("span").bind("click",function(){a.start()}))),m=function(){e.find("span").hide(),setTimeout(function(){h++,g=!0,h>=k.length&&(h=0,i++,i==d.playTimes&&(j=!1,g=!1,d.onPlayEnd(),d.isMovie?(b.src=k[0],e.find("span").fadeIn(100)):d.stopOnFinish&&(b.src=k[k.length-1]))),b.src=k[h],h>0&&(b.style.opacity=1),j&&m()},Math.round(1e3/d.rate))},0!=k.length&&(b.src=k[0],0!=d.delay?setTimeout(function(){m()},d.delay):d.isMovie?(b.style.opacity=1,f&&m()):m()),f+=1};return h(),this.start=function(){g||h()},this}}(jQuery);